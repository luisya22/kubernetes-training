{
  "id": "intermediate-secrets",
  "title": "Secrets and Sensitive Data Management",
  "level": "intermediate",
  "order": 1,
  "concepts": ["secrets", "security", "sensitive-data", "encryption"],
  "content": {
    "introduction": "Secrets are Kubernetes objects designed to hold sensitive information such as passwords, OAuth tokens, and SSH keys. They provide a more secure way to handle sensitive data compared to putting it directly in Pod specifications.",
    "sections": [
      {
        "title": "Creating Secrets",
        "content": "Secrets can be created from literal values, files, or YAML manifests. Data in Secrets is base64 encoded.",
        "codeExamples": [
          {
            "language": "bash",
            "code": "# Create Secret from literal values\nkubectl create secret generic db-credentials \\\n  --from-literal=username=admin \\\n  --from-literal=password=secretpass123",
            "explanation": "This creates a Secret named 'db-credentials' with username and password fields."
          },
          {
            "language": "yaml",
            "code": "apiVersion: v1\nkind: Secret\nmetadata:\n  name: db-credentials\ntype: Opaque\ndata:\n  username: YWRtaW4=\n  password: c2VjcmV0cGFzczEyMw==",
            "explanation": "The same Secret defined in YAML. Values are base64 encoded (admin and secretpass123)."
          }
        ]
      },
      {
        "title": "Using Secrets in Pods",
        "content": "Secrets can be consumed by Pods as environment variables or mounted as files.",
        "codeExamples": [
          {
            "language": "yaml",
            "code": "apiVersion: v1\nkind: Pod\nmetadata:\n  name: app-pod\nspec:\n  containers:\n  - name: app\n    image: myapp:latest\n    env:\n    - name: DB_USERNAME\n      valueFrom:\n        secretKeyRef:\n          name: db-credentials\n          key: username\n    - name: DB_PASSWORD\n      valueFrom:\n        secretKeyRef:\n          name: db-credentials\n          key: password",
            "explanation": "This Pod uses Secret values as environment variables."
          },
          {
            "language": "yaml",
            "code": "apiVersion: v1\nkind: Pod\nmetadata:\n  name: app-pod-volume\nspec:\n  containers:\n  - name: app\n    image: myapp:latest\n    volumeMounts:\n    - name: secret-volume\n      mountPath: /etc/secrets\n      readOnly: true\n  volumes:\n  - name: secret-volume\n    secret:\n      secretName: db-credentials",
            "explanation": "This Pod mounts the Secret as files in /etc/secrets directory."
          }
        ]
      },
      {
        "title": "Secret Best Practices",
        "content": "Follow security best practices when working with Secrets: enable encryption at rest, use RBAC to restrict access, avoid logging Secret values, and consider external secret management solutions for production.",
        "codeExamples": [
          {
            "language": "bash",
            "code": "# View Secret (shows base64 encoded values)\nkubectl get secret db-credentials -o yaml\n\n# Decode Secret value\nkubectl get secret db-credentials -o jsonpath='{.data.password}' | base64 --decode",
            "explanation": "Commands to view and decode Secret values. Be careful not to expose these in logs or terminal history."
          }
        ]
      }
    ],
    "summary": "Secrets provide a secure way to manage sensitive data in Kubernetes. Always follow security best practices and consider encryption at rest for production environments."
  },
  "exercises": ["exercise-secrets"],
  "prerequisites": ["intermediate-configmaps"]
}
